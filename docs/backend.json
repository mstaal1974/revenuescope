{
  "entities": {
    "Lead": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Lead",
      "type": "object",
      "description": "Represents a lead captured through the lead capture overlay.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Lead entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the lead."
        },
        "email": {
          "type": "string",
          "description": "Email address of the lead.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the lead."
        },
        "rtoCode": {
          "type": "string",
          "description": "RTO code associated with the audit for which the lead was captured."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp indicating when the lead was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "phoneNumber",
        "rtoCode",
        "timestamp"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/leads/{leadId}",
        "definition": {
          "entityName": "Lead",
          "schema": {
            "$ref": "#/backend/entities/Lead"
          },
          "description": "Stores lead information captured from the Lead Capture Overlay. Includes fields for name, email, phone number, RTO code, and timestamp. Requires admin role for create, read, update and delete.",
          "params": [
            {
              "name": "leadId",
              "description": "Unique identifier for the Lead document."
            }
          ]
        }
      }
    ],
    "reasoning": "This design prioritizes security and scalability by adhering to the core design principles and strategy mandates. Specifically, it emphasizes Authorization Independence by storing all necessary authorization data directly within each document, eliminating the need for `get()` calls in security rules. \n\nThe primary collection is `/leads`. Since all documents within the `leads` collection share the same access requirements (admin only create/read/write), this structure maintains a Homogeneous Security Posture.\n\nTo ensure QAPs (Rules Are Not Filters), access to the `leads` collection is strictly controlled based on authentication and potentially pre-defined admin roles stored in a separate collection. This prevents unauthorized listing of leads.\n"
  }
}